{"version":3,"sources":["../../js/Bullet.js"],"names":[],"mappings":";;;;;;;;;;IAAM,MAAM;cAAN,MAAM;;AAEI,aAFV,MAAM,CAEK,IAAI,EAAE,QAAQ,EAAE;;;8BAF3B,MAAM;;AAGJ,mCAHF,MAAM,6CAGE,IAAI,EAAE;AACZ,YAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;;;AAGzB,YAAI,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC,YAAY,CAAC,EAAC,QAAQ,EAAE,GAAG,EAAC,CAAC,CAAC;AAC1D,UAAE,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;;;AAG5B,YAAI,CAAC,SAAS,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,GAAG,EAAC,CAAC,EAAC,CAAC,CAAC,CAAC;;AAE9C,YAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;;AAGtB,YAAI,CAAC,QAAQ,EAAE,CAAC;;;AAGhB,YAAI,CAAC,KAAK,GAAG,CAAC,CAAC;;AAEf,YAAM,QAAQ,GAAG,EAAE,CAAC;;;AAGpB,YAAI,CAAC,KAAK,GAAG,YAAM;AACf,kBAAK,kBAAkB,CAAC,MAAK,SAAS,CAAC,CAAC;;AAExC,gBAAI,MAAK,QAAQ,CAAC,CAAC,IAAI,QAAQ,EAAE;AAC7B,sBAAK,OAAO,EAAE,CAAC;aAClB;SACJ,CAAC;AACF,YAAI,CAAC,QAAQ,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;;AAGjD,YAAI,CAAC,SAAS,GAAG,UAAC,SAAS,EAAK;;AAE5B,gBAAI,SAAS,YAAY,KAAK,EAAE;;AAE5B,oBAAI,SAAS,CAAC,SAAS,EAAE;AACrB,6BAAS,CAAC,OAAO,CAAC,MAAK,KAAK,CAAC,CAAC;AAC9B,0BAAK,OAAO,EAAE,CAAC;iBAClB;aACJ;SACJ,CAAA;KACJ;;;;;;iBA5CC,MAAM;;eAiDA,mBAAG;;AAEP,gBAAI,CAAC,QAAQ,EAAE,CAAC,sBAAsB,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;;AAEnD,gBAAI,CAAC,OAAO,EAAE,CAAC;SAClB;;;WAtDC,MAAM;GAAS,UAAU","file":"Bullet.js","sourcesContent":["class Bullet extends GameObject{\r\n\r\n    constructor (game, position) {\r\n        super(game);\r\n        this.position = position;\r\n\r\n        // A bullet is a simple sphere\r\n        let vd = BABYLON.VertexData.CreateSphere({diameter: 0.3});\r\n        vd.applyToMesh(this, false);\r\n\r\n        // Direction by default is along the line\r\n        this.direction = new BABYLON.Vector3(0.1,0,0);\r\n\r\n        this.isVisible = true;\r\n\r\n        // Set ready to avoid first frame collisions\r\n        this.setReady();\r\n\r\n        // The number of life points it removes to the hit enemy\r\n        this.power = 1;\r\n\r\n        const MAX_DIST = 15;\r\n\r\n        // Move function\r\n        this._move = () => {\r\n            this.moveWithCollisions(this.direction);\r\n            //destroy bullet if too far away\r\n            if (this.position.x >= MAX_DIST) {\r\n                this.destroy();\r\n            }\r\n        };\r\n        this.getScene().registerBeforeRender(this._move);\r\n\r\n        // Collision function\r\n        this.onCollide = (otherMesh) => {\r\n            // Collide only on enemies\r\n            if (otherMesh instanceof Enemy) {\r\n                // Collide only on waking enemies\r\n                if (otherMesh.isWalking) {\r\n                    otherMesh.destroy(this.power);\r\n                    this.destroy();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Remove this bullet\r\n     */\r\n    destroy () {\r\n        // Remove move function\r\n        this.getScene().unregisterBeforeRender(this._move);\r\n        // Remove the object\r\n        this.dispose();\r\n    }\r\n}"]}