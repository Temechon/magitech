{"version":3,"sources":["../../js/Enemy.js"],"names":[],"mappings":";;;;;;;;;;IAAM,KAAK;cAAL,KAAK;;AAEI,aAFT,KAAK,CAEK,IAAI,EAAE;;;8BAFhB,KAAK;;AAGH,mCAHF,KAAK,6CAGG,IAAI,EAAE;;AAEZ,YAAI,CAAC,IAAI,GAAG,OAAO,CAAC;;AAEpB,YAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,OAAO,CAAC,CAAC,EAAC,GAAG,EAAC,CAAC,CAAC,CAAC;;AAE7C,YAAI,CAAC,SAAS,GAAG,IAAI,CAAC;;;AAGtB,YAAI,CAAC,UAAU,GAAG,CAAC,CAAC;;;AAGpB,YAAI,EAAE,GAAG,OAAO,CAAC,UAAU,CAAC,SAAS,CAAC,EAAC,KAAK,EAAC,GAAG,EAAE,MAAM,EAAC,CAAC,EAAE,KAAK,EAAC,GAAG,EAAC,CAAC,CAAC;AACxE,UAAE,CAAC,WAAW,CAAC,IAAI,EAAE,KAAK,CAAC,CAAC;;AAE5B,YAAI,CAAC,QAAQ,GAAG,IAAI,OAAO,CAAC,gBAAgB,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,EAAE,CAAC,CAAC;AAClE,YAAI,CAAC,QAAQ,CAAC,YAAY,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,EAAE,CAAC;;;AAGlD,YAAI,CAAC,UAAU,GAAG,KAAK,CAAC;;AAExB,YAAI,CAAC,QAAQ,EAAE,CAAC;;;AAGhB,YAAI,CAAC,SAAS,GAAG,YAAM;AACnB,gBAAI,MAAK,UAAU,EAAE;;AAEjB,sBAAK,IAAI,EAAE,CAAC;aACf;SACJ,CAAC;AACF,YAAI,CAAC,QAAQ,EAAE,CAAC,oBAAoB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;KACxD;;iBAlCC,KAAK;;;;;;eAiDF,gBAAG;AACJ,gBAAI,CAAC,QAAQ,CAAC,CAAC,IAAI,IAAI,CAAC;SAC3B;;;eAEI,iBAAG;AACJ,kCAAoB,IAAI,CAAC,UAAU,CAAE;SACxC;;;;;;;eAKM,iBAAC,WAAW,EAAE;;;AAGjB,gBAAI,CAAC,UAAU,IAAI,WAAW,CAAC;;;AAG/B,gBAAI,IAAI,CAAC,UAAU,IAAI,CAAC,EAAE;;AAEtB,oBAAI,CAAC,IAAI,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;;AAEjC,oBAAI,CAAC,QAAQ,EAAE,CAAC,sBAAsB,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC;AACvD,oBAAI,CAAC,OAAO,EAAE,CAAC;aAClB;SACJ;;;aArCY,eAAG;AACZ,mBAAO,IAAI,CAAC,UAAU,CAAC;SAC1B;aAEY,aAAC,GAAG,EAAE;AACf,gBAAI,CAAC,UAAU,GAAG,GAAG,CAAC;;;AAGtB,gBAAI,CAAC,eAAe,GAAG,GAAG,CAAC;SAC9B;;;WA7CC,KAAK;GAAS,UAAU","file":"Enemy.js","sourcesContent":["class Enemy extends GameObject{\r\n\r\n    constructor(game) {\r\n        super(game);\r\n\r\n        this.name = \"enemy\";\r\n\r\n        this.position = new BABYLON.Vector3(0,0.5,0);\r\n\r\n        this.isVisible = true;\r\n\r\n        // The life of this enemy\r\n        this.lifePoints = 5;\r\n\r\n        // An enemy is a simple sphere\r\n        var vd = BABYLON.VertexData.CreateBox({width:0.5, height:1, depth:0.5});\r\n        vd.applyToMesh(this, false);\r\n\r\n        this.material = new BABYLON.StandardMaterial(\"\", this.getScene());\r\n        this.material.diffuseColor = BABYLON.Color3.Red();\r\n\r\n        // True if this enemy walks along the line\r\n        this._isWalking = false;\r\n\r\n        this.setReady();\r\n\r\n        // Game loop : enemy walks, get bullets and diiiiie\r\n        this._gameLoop = () => {\r\n            if (this._isWalking) {\r\n                // Increase the enemy position in -x\r\n                this.move();\r\n            }\r\n        };\r\n        this.getScene().registerBeforeRender(this._gameLoop);\r\n    }\r\n\r\n    get isWalking() {\r\n        return this._isWalking;\r\n    }\r\n\r\n    set isWalking(val) {\r\n        this._isWalking = val;\r\n\r\n        // Check collisions for bullets\r\n        this.checkCollisions = val;\r\n    }\r\n    /**\r\n     * Move this enemy during a tick\r\n     */\r\n    move () {\r\n        this.position.x -= 0.01;\r\n    }\r\n\r\n    debug() {\r\n        return `walking : ${this._isWalking}`\r\n    }\r\n\r\n    /**\r\n     * Destroy this enemy. Parameter is the power of the bullet\r\n     */\r\n    destroy(bulletPower) {\r\n\r\n        // Decrease the poor guy life\r\n        this.lifePoints -= bulletPower;\r\n        // Todo hit animation ?\r\n\r\n        if (this.lifePoints <= 0) {\r\n            // Remove enemy from wave manager\r\n            this.game.wave.removeEnemy(this);\r\n\r\n            this.getScene().unregisterBeforeRender(this._gameLoop);\r\n            this.dispose();\r\n        }\r\n    }\r\n\r\n\r\n\r\n\r\n}"]}