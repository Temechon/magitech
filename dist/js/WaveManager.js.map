{"version":3,"sources":["../../js/WaveManager.js"],"names":[],"mappings":";;;;;;IAAM,WAAW;AAEF,aAFT,WAAW,CAED,IAAI,EAAE;8BAFhB,WAAW;;AAGT,YAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;;AAGjB,YAAI,CAAC,WAAW,GAAG,EAAE,CAAC;;;;AAItB,YAAI,CAAC,aAAa,GAAG,EAAE,CAAC;;;;AAIxB,YAAI,CAAC,WAAW,GAAG,EAAE,CAAC;;AAEtB,YAAI,CAAC,kBAAkB,GAAG,EAAE,CAAC;KAChC;;;;;;iBAjBC,WAAW;;eAsBL,oBAAG;;;;AAGP,gBAAI,EAAE,GAAG,EAAE,CAAC;AACZ,iBAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,EAAE,EAAE,CAAC,EAAE,EAAE;AACrB,oBAAI,KAAK,GAAG,IAAI,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACjC,oBAAI,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,CAAC;;;AAGrC,qBAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC;AAC5C,qBAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,IAAI,CAAC,kBAAkB,CAAC;;;AAG3C,oBAAI,CAAC,aAAa,CAAC,IAAI,CAAC,EAAC,KAAK,EAAC,KAAK,EAAE,IAAI,EAAC,IAAI,EAAC,CAAC,CAAC;aACrD;;AAED,gBAAI,KAAK,GAAG,CAAC,CAAC;AACd,gBAAI,CAAC,GAAG,IAAI,KAAK,CAAC,IAAI,EAAE,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE,EAAC,MAAM,EAAC,EAAE,EAAE,WAAW,EAAC,IAAI,EAAC,CAAC,CAAC;AACxE,aAAC,CAAC,QAAQ,GAAG,YAAM;AACf,oBAAI,GAAG,GAAG,MAAK,aAAa,CAAC,KAAK,EAAE,CAAC,CAAC;AACtC,oBAAI,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC;AACtB,oBAAI,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;AACpB,qBAAK,CAAC,SAAS,GAAG,IAAI,CAAC;;AAEvB,oBAAI,CAAC,KAAK,GAAG,IAAI,CAAC;;;AAGlB,sBAAK,WAAW,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;aAC9B,CAAC;AACF,aAAC,CAAC,QAAQ,GAAG,YAAM;;AAEf,sBAAK,aAAa,CAAC,MAAM,GAAG,CAAC,CAAC;aACjC,CAAC;AACF,aAAC,CAAC,KAAK,EAAE,CAAC;SACb;;;;;;;;eAMU,qBAAC,KAAK,EAAE;;;;;;AACf,qCAAgB,IAAI,CAAC,WAAW,8HAAE;wBAAzB,GAAG;;AACR,wBAAI,GAAG,CAAC,KAAK,KAAK,KAAK,EAAE;;qBAExB;iBACJ;;;;;;;;;;;;;;;SACJ;;;WApEC,WAAW","file":"WaveManager.js","sourcesContent":["class WaveManager {\r\n\r\n    constructor(game) {\r\n        this.game = game;\r\n\r\n        // Enemies sent on the battlefield but not dead yet for the current wave\r\n        this.enemiesSent = [];\r\n\r\n        // Enemies that should be sent for the current wave\r\n        // This array is composed of objects {enemy, line}\r\n        this.enemiesToSend = [];\r\n\r\n        // Enemies sent for the current wave\r\n        // This array is indexed by lines\r\n        this.enemiesSent = [];\r\n\r\n        this.ENEMIES_X_POSITION = 10;\r\n    }\r\n\r\n    /**\r\n     * Send the next wave\r\n     */\r\n    sendWave() {\r\n\r\n        // Create X enemies\r\n        let nb = 10;\r\n        for (let e=0; e<nb; e++) {\r\n            let enemy = new Enemy(this.game);\r\n            let line = this.game.getRandomLine();\r\n\r\n            // update enemy position\r\n            enemy.position.z = line.cells[0].position.z;\r\n            enemy.position.x = this.ENEMIES_X_POSITION;\r\n\r\n            // Save enemy\r\n            this.enemiesToSend.push({enemy:enemy, line:line});\r\n        }\r\n\r\n        let count = 0;\r\n        var t = new Timer(1500, this.game.scene, {repeat:nb, autodestroy:true});\r\n        t.callback = () => {\r\n            let obj = this.enemiesToSend[count++];\r\n            let enemy = obj.enemy;\r\n            let line = obj.line;\r\n            enemy.isWalking = true;\r\n            // set line as hot\r\n            line.isHot = true;\r\n\r\n            // Save the enemy that has been sent\r\n            this.enemiesSent.push(obj);\r\n        };\r\n        t.onFinish = () => {\r\n            // Remove all enemies to send, cause all enemies have been sent :)\r\n            this.enemiesToSend.length = 0;\r\n        };\r\n        t.start();\r\n    }\r\n\r\n    /**\r\n     * The given enemy has been destroyed: delete it from the wave manager.\r\n     * If a line has no more enemy walking, deactivate the line\r\n     */\r\n    removeEnemy(enemy) {\r\n        for (let obj of this.enemiesSent) {\r\n            if (obj.enemy === enemy) {\r\n                // TODO\r\n            }\r\n        }\r\n    }\r\n}"]}