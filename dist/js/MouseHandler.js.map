{"version":3,"sources":["../../js/MouseHandler.js"],"names":[],"mappings":";;;;;;IAAM,YAAY;AAGH,aAHT,YAAY,CAGF,IAAI,EAAE;;;8BAHhB,YAAY;;AAKV,YAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;;AAGjB,YAAI,CAAC,WAAW,GAAG,IAAI,CAAC;;AAExB,SAAC,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,UAAC,GAAG,EAAK;AACzB,gBAAI,MAAK,WAAW,EAAE;;AAElB,sBAAK,IAAI,CAAC,KAAK,CAAC,sBAAsB,CAAC,GAAG,CAAC,CAAC;;AAE5C,oBAAI,QAAQ,GAAG,MAAK,gBAAgB,EAAE,CAAC;AACvC,oBAAI,QAAQ,EAAE;AACV,wBAAI,CAAC,GAAG,MAAK,IAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,CAAC;AAC3C,0BAAK,WAAW,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAC,QAAQ,CAAC,CAAC;iBAElD;aAEJ;SACJ,CAAC,CAAA;KAEL;;;;iBAzBC,YAAY;;eA4BE,4BAAG;AACf,gBAAI,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;AAC5B,gBAAI,EAAE,GAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,SAAS,EAAE,KAAK,CAAC,SAAS,EAAE,UAAC,IAAI,EAAK;AAAE,uBAAO,IAAI,CAAC,IAAI,IAAI,QAAQ,CAAC;aAAE,EAAE,KAAK,CAAC,CAAC;AAC1G,gBAAI,EAAE,CAAC,GAAG,EAAE;AACR,uBAAO,EAAE,CAAC,WAAW,CAAC,KAAK,EAAE,CAAC;aACjC;AACD,mBAAO,IAAI,CAAC;SACf;;;WAnCC,YAAY","file":"MouseHandler.js","sourcesContent":["class MouseHandler {\r\n\r\n\r\n    constructor(game) {\r\n\r\n        this.game = game;\r\n\r\n        // This object will follow the mouse\r\n        this.followMouse = null;\r\n\r\n        $(window).mousemove((evt) => {\r\n            if (this.followMouse) {\r\n                // Update pointer coordinate\r\n                this.game.scene._updatePointerPosition(evt);\r\n                // Pick ground position according to the mouse cursor\r\n                let worldPos = this.getWorldPosition();\r\n                if (worldPos) {\r\n                    let c = this.game.getNearestCell(worldPos);\r\n                    this.followMouse.position.copyFrom(c.position);\r\n\r\n                }\r\n\r\n            }\r\n        })\r\n\r\n    }\r\n\r\n    // Project the given screen coordinate into 3D world\r\n    getWorldPosition() {\r\n        let scene = this.game.scene;\r\n        var pr = scene.pick(scene._pointerX, scene._pointerY, (mesh) => { return mesh.name == \"ground\"; }, false);\r\n        if (pr.hit) {\r\n            return pr.pickedPoint.clone();\r\n        }\r\n        return null;\r\n    }\r\n\r\n\r\n\r\n}"]}