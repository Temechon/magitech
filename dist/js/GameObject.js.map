{"version":3,"sources":["../../js/GameObject.js"],"names":[],"mappings":";;;;;;;;;;IAAM,UAAU;cAAV,UAAU;;AACD,aADT,UAAU,CACA,IAAI,EAAE;8BADhB,UAAU;;AAER,mCAFF,UAAU,6CAEF,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE;AAC5B,YAAI,CAAC,IAAI,GAAG,IAAI,CAAC;;;AAGjB,YAAI,CAAC,SAAS,GAAG,KAAK,CAAC;;;AAGvB,YAAI,CAAC,SAAS,GAAG,EAAE,CAAC;;;AAGpB,eAAO,CAAC,IAAI,CAAC,SAAS,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAC;KAC1C;;iBAbC,UAAU;;eAeJ,oBAAG;AACP,gBAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;AAC9B,gBAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAS,KAAK,EAAE;AACnC,qBAAK,CAAC,kBAAkB,CAAC,IAAI,CAAC,CAAC;aAClC,CAAC,CAAC;SACN;;;;;;;;;eAOe,0BAAC,KAAK,EAAE;;;AACpB,gBAAI,QAAQ,YAAA,CAAC;;AAEb,gBAAI,EAAG,KAAK,YAAY,KAAK,CAAA,AAAC,EAAE;AAC5B,wBAAQ,GAAG,CAAC,KAAK,CAAC,CAAC;aACtB,MAAM;AACH,wBAAQ,GAAG,KAAK,CAAC;aACpB;;AAED,oBAAQ,CAAC,OAAO,CAAC,UAAC,IAAI,EAAK;AACvB,oBAAI,IAAI,YAAY,OAAO,CAAC,IAAI,EAAE;AAC9B,wBAAI,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC9C,4BAAQ,CAAC,MAAM,QAAO,CAAC;AACvB,0BAAK,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;iBACjC,MAAM;AACH,2BAAO,CAAC,IAAI,CAAI,IAAI,qBAAkB,CAAC;iBAC1C;aACJ,CAAC,CAAC;SACN;;;eAEc,yBAAC,KAAK,EAAE;;AAEnB,gBAAI,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,QAAQ,CAAC,EAAE;AAC5C,qBAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACxC,yBAAK,IAAI,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,KAAK,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACzC,4BAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,EAAE;AAC5D,mCAAO,IAAI,CAAC;yBACf;qBACJ;iBACJ;aACJ,MAAM;;AAEH,qBAAK,CAAC,GAAC,CAAC,EAAE,CAAC,GAAC,IAAI,CAAC,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;AACpC,wBAAI,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,EAAE;AAC/C,+BAAO,IAAI,CAAC;qBACf;iBACJ;aACJ;SACJ;;;WAjEC,UAAU;GAAS,OAAO,CAAC,IAAI","file":"GameObject.js","sourcesContent":["class GameObject extends BABYLON.Mesh {\r\n    constructor(game) {\r\n        super(\"__go__\", game.scene);\r\n        this.game = game;\r\n\r\n        // The game object is not visible\r\n        this.isVisible = false;\r\n\r\n        // A game object can have several children\r\n        this._children = [];\r\n\r\n        // tag\r\n        BABYLON.Tags.AddTagsTo(this, \"__go__\");\r\n    }\r\n\r\n    setReady() {\r\n        this.computeWorldMatrix(true);\r\n        this._children.forEach(function(child) {\r\n            child.computeWorldMatrix(true);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Create an instance of the given meshes and link them to this game object (by adding\r\n     * them in children).\r\n     * Child is a mesh or an array of meshes\r\n     */\r\n    addInstanceChild(child) {\r\n        let children;\r\n\r\n        if (! (child instanceof Array)) {\r\n            children = [child];\r\n        } else {\r\n            children = child;\r\n        }\r\n\r\n        children.forEach((elem) => {\r\n            if (elem instanceof BABYLON.Mesh) {\r\n                let instance = elem.createInstance(elem.name);\r\n                instance.parent = this;\r\n                this._children.push(instance);\r\n            } else {\r\n                console.warn(`${elem} is not a mesh!`);\r\n            }\r\n        });\r\n    }\r\n\r\n    isCollidingWith(other) {\r\n        // If other is a gameobject, collide each children\r\n        if (BABYLON.Tags.MatchesQuery(other, \"__go__\")) {\r\n            for (var i=0; i<this._children.length; i++) {\r\n                for (var j=0; j<other._children.length; j++) {\r\n                    if (this._children[i].intersectsMesh(other._children[j], true)) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n        } else {\r\n            // Otherwise, collide each children with other\r\n            for (i=0; i<this._children.length; i++) {\r\n                if (this._children[i].intersectsMesh(other, true)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n}"]}